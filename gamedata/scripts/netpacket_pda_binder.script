-- -*- mode: lua; coding: windows-1251-dos -*-
-- original idea by Monnoroch
-- base script by Malandrinus
-- scripting by Shadowman

function init( obj )
  local new_binder = my_binder( obj )
  obj:bind_object( new_binder )
end


class "my_binder" ( object_binder )
function my_binder:__init( obj ) super( obj )
end


function my_binder:reload (section )
  object_binder.reload( self, section )
end


function my_binder:reinit()
  object_binder.reinit( self )
  db.storage[ self.object:id() ] = {}
  self.object:set_callback( callback.use_object, self.use_callback, self )
end


function my_binder:net_spawn( data )
  db.add_obj( self.object )
  return object_binder.net_spawn( self, data )
end


function my_binder:net_destroy()
  object_binder.net_destroy( self )
end


function my_binder:save( packet )
  object_binder.save( self, packet )
  xr_logic.save_obj( self.object, packet )
end


function my_binder:load( reader )
  object_binder.load( self, reader )
  xr_logic.load_obj( self.object, reader )
end
